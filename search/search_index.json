{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Grape Docs Welcome to grape documentation and coder good practices. We are leaving some links, our productive process description, UI standards code snippets, NET Core CRUD code snippets and more. All Must Read and Watch this Sets of videos of uncle bob about considerations of how to code, better than any Netflix production, you should watch this!. https://www.youtube.com/playlist?list=PLmmYSbUCWJ4x1GO839azG_BBw8rkh-zOj","title":"Home"},{"location":"#grape-docs","text":"Welcome to grape documentation and coder good practices. We are leaving some links, our productive process description, UI standards code snippets, NET Core CRUD code snippets and more.","title":"Grape Docs"},{"location":"#all-must-read-and-watch-this","text":"Sets of videos of uncle bob about considerations of how to code, better than any Netflix production, you should watch this!. https://www.youtube.com/playlist?list=PLmmYSbUCWJ4x1GO839azG_BBw8rkh-zOj","title":"All Must Read and Watch this"},{"location":"autocomplete/","text":"How to implement Angular Autocomplete Html Component Code <input type=\"search\" autocomplete=\"off\" typeaheadOptionField=\"fullName\" [(ngModel)]=\"term\" [typeahead]=\"suggestions$\" [typeaheadAsync]=\"true\" (typeaheadOnSelect)=\"onSelect($event)\" [typeaheadWaitMs]=\"500\" (keyup)=\"onKeyUp()\" (ngModelChange)=\"onKeyUp()\" class=\"form-control\" placeholder=\"XXXXX\" /> TS Component Code import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core'; import { TypeaheadMatch } from 'ngx-bootstrap/typeahead'; import { Observable, Observer, map, noop, of, switchMap, tap } from 'rxjs'; import { HelperService } from '../services/helper.service'; import { UtilsService } from '../services/utils.service'; @Component({ selector: 'app-country-autocomplete', templateUrl: './country-autocomplete.component.html', styles: [], }) export class CountryAutocompleteComponent implements OnInit { @Input() term: string = ''; @Input() selected: any = {}; @Output() selectedChange = new EventEmitter(); working = false; suggestions$: Observable<any[]>; constructor(private baseServices: UtilsService, private helpers: HelperService) {} ngOnInit(): void { this.suggestions$ = new Observable((observer: Observer<any>) => { observer.next(this.term); }).pipe( switchMap((query: string) => { if (query) { return this.baseServices.searchCountriesAutocomplete({ searchText: query }).pipe( map((data: any) => (data && data) || []), tap({ next: () => noop, error: (e) => { // in case of http error this.helpers.RaiseNotification('danger', 'Error', e.error ?? e.message); }, }), ); } return of([]); }), ); } onKeyUp(): void { if (this.term?.length === 0) { this.selected = null; this.selectedChange.emit(''); } } onSelect(event: TypeaheadMatch): void { this.selected = event.item; this.selectedChange.emit(this.selected.countriesID); } }","title":"Autocomplete"},{"location":"autocomplete/#how-to-implement-angular-autocomplete","text":"","title":"How to implement Angular Autocomplete"},{"location":"autocomplete/#html","text":"Component Code <input type=\"search\" autocomplete=\"off\" typeaheadOptionField=\"fullName\" [(ngModel)]=\"term\" [typeahead]=\"suggestions$\" [typeaheadAsync]=\"true\" (typeaheadOnSelect)=\"onSelect($event)\" [typeaheadWaitMs]=\"500\" (keyup)=\"onKeyUp()\" (ngModelChange)=\"onKeyUp()\" class=\"form-control\" placeholder=\"XXXXX\" />","title":"Html"},{"location":"autocomplete/#ts","text":"Component Code import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core'; import { TypeaheadMatch } from 'ngx-bootstrap/typeahead'; import { Observable, Observer, map, noop, of, switchMap, tap } from 'rxjs'; import { HelperService } from '../services/helper.service'; import { UtilsService } from '../services/utils.service'; @Component({ selector: 'app-country-autocomplete', templateUrl: './country-autocomplete.component.html', styles: [], }) export class CountryAutocompleteComponent implements OnInit { @Input() term: string = ''; @Input() selected: any = {}; @Output() selectedChange = new EventEmitter(); working = false; suggestions$: Observable<any[]>; constructor(private baseServices: UtilsService, private helpers: HelperService) {} ngOnInit(): void { this.suggestions$ = new Observable((observer: Observer<any>) => { observer.next(this.term); }).pipe( switchMap((query: string) => { if (query) { return this.baseServices.searchCountriesAutocomplete({ searchText: query }).pipe( map((data: any) => (data && data) || []), tap({ next: () => noop, error: (e) => { // in case of http error this.helpers.RaiseNotification('danger', 'Error', e.error ?? e.message); }, }), ); } return of([]); }), ); } onKeyUp(): void { if (this.term?.length === 0) { this.selected = null; this.selectedChange.emit(''); } } onSelect(event: TypeaheadMatch): void { this.selected = event.item; this.selectedChange.emit(this.selected.countriesID); } }","title":"TS"},{"location":"b4to5/","text":"Bootstrap 4 to 5 migration replace on HTML buscador d-flex justify-content-between input-group x d-flex justify-content-between float-right x float-end badge badge-info x badge text-bg-info selects -> form-control x checkbox -> se agrega en el input class=\"form-check-input\" modals -> close pull-right x btn-close, modal-title pull-left x modal-title, quitar \u00d7 ABM row flex-row-reverse mt-4 x d-flex flex-row-reverse mt-4 mr-2 x me-2 (as\u00ed con todos los m se reemplaza rxe y lxs)","title":"Bootstrap 4 to 5"},{"location":"b4to5/#bootstrap-4-to-5-migration","text":"replace on HTML","title":"Bootstrap 4 to 5 migration"},{"location":"b4to5/#buscador","text":"d-flex justify-content-between input-group x d-flex justify-content-between float-right x float-end badge badge-info x badge text-bg-info selects -> form-control x checkbox -> se agrega en el input class=\"form-check-input\" modals -> close pull-right x btn-close, modal-title pull-left x modal-title, quitar \u00d7","title":"buscador"},{"location":"b4to5/#abm","text":"row flex-row-reverse mt-4 x d-flex flex-row-reverse mt-4 mr-2 x me-2 (as\u00ed con todos los m se reemplaza rxe y lxs)","title":"ABM"},{"location":"http-services/","text":"Calling external REST In each Microservice some times calling others REST is needed. In that case this are the steps to implement this kind of calls. Startup or Program Simple version is not using a custom handler to intercept HTTP Calls in this case this is the code. services.AddHttpClient<SimpleRouteService>(); LoginHandler is not needed, only should exists if for some reason use case need to log or define some general params, or for debug. This code should be replace with correct params. services.AddTransient<LoggingHandler>(); services.AddHttpClient<SimpleRouteService>() // Only if capture each request is required as Angular Interceptor .AddHttpMessageHandler<LoggingHandler>(); If token integration is fixed it should be record in database SystemIntegrations and token params should be get from there, same as URL. This params should be added in service constructor. Class LoggingHandler is needed, you must copy it from other microservice. Http Service SDK Each service should be implemented throw a user class with this format. public class SimpleRouteService { private readonly HttpClient _httpClient; private readonly AppDBContext db; /// <summary> /// Constructor is executing only once when app starts /// </summary> /// <param name=\"httpClient\"></param> /// <param name=\"httpContextAccessor\"></param> public SimpleRouteService(HttpClient httpClient, IHttpContextAccessor httpContextAccessor, AppDBContext context) { db = context; _httpClient = httpClient; var integrations = GetOrCreateSystemIntegration(\"SimpleRoute\").Result; httpClient.BaseAddress = new Uri(integrations.UrlLogin); // Get params from database SystemIntegrations httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(\"Token\", integrations.Token); httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(\"application/json\")); } public async Task<dynamic> GetMe() { var responseString = await _httpClient.GetStringAsync(\"/v1/accounts/me/\"); var res = JsonConvert.DeserializeObject<dynamic>(responseString); return res; } private async Task<SystemIntegration> GetOrCreateSystemIntegration(string appName) { var integration = await db.SystemsIntegrations.FirstOrDefaultAsync(x=>x.AppName == appName); if(integration == null) { integration = new SystemIntegration{ AppName = appName, Token = \"XXXXXXX\", Protocol = \"apikey\", Active = true, UrlLogin = \"https://api.simpliroute.com/\", }; await db.SystemsIntegrations.AddAsync(integration); await db.SaveChangesAsync(); } return integration; } } Developer should implement each method and each class used in this file. Controllers Where is need to call external REST this code should be write. protected readonly SimpleRouteService _routeClient; And in constructor public PedidosController(AppDBContext context, SimpleRouteService route) : base(context) { _routeClient = route; } Then each time a call is needed a private object is available in controller.","title":"External Services"},{"location":"http-services/#calling-external-rest","text":"In each Microservice some times calling others REST is needed. In that case this are the steps to implement this kind of calls.","title":"Calling external REST"},{"location":"http-services/#startup-or-program","text":"Simple version is not using a custom handler to intercept HTTP Calls in this case this is the code. services.AddHttpClient<SimpleRouteService>(); LoginHandler is not needed, only should exists if for some reason use case need to log or define some general params, or for debug. This code should be replace with correct params. services.AddTransient<LoggingHandler>(); services.AddHttpClient<SimpleRouteService>() // Only if capture each request is required as Angular Interceptor .AddHttpMessageHandler<LoggingHandler>(); If token integration is fixed it should be record in database SystemIntegrations and token params should be get from there, same as URL. This params should be added in service constructor. Class LoggingHandler is needed, you must copy it from other microservice.","title":"Startup or Program"},{"location":"http-services/#http-service-sdk","text":"Each service should be implemented throw a user class with this format. public class SimpleRouteService { private readonly HttpClient _httpClient; private readonly AppDBContext db; /// <summary> /// Constructor is executing only once when app starts /// </summary> /// <param name=\"httpClient\"></param> /// <param name=\"httpContextAccessor\"></param> public SimpleRouteService(HttpClient httpClient, IHttpContextAccessor httpContextAccessor, AppDBContext context) { db = context; _httpClient = httpClient; var integrations = GetOrCreateSystemIntegration(\"SimpleRoute\").Result; httpClient.BaseAddress = new Uri(integrations.UrlLogin); // Get params from database SystemIntegrations httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(\"Token\", integrations.Token); httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(\"application/json\")); } public async Task<dynamic> GetMe() { var responseString = await _httpClient.GetStringAsync(\"/v1/accounts/me/\"); var res = JsonConvert.DeserializeObject<dynamic>(responseString); return res; } private async Task<SystemIntegration> GetOrCreateSystemIntegration(string appName) { var integration = await db.SystemsIntegrations.FirstOrDefaultAsync(x=>x.AppName == appName); if(integration == null) { integration = new SystemIntegration{ AppName = appName, Token = \"XXXXXXX\", Protocol = \"apikey\", Active = true, UrlLogin = \"https://api.simpliroute.com/\", }; await db.SystemsIntegrations.AddAsync(integration); await db.SaveChangesAsync(); } return integration; } } Developer should implement each method and each class used in this file.","title":"Http Service SDK"},{"location":"http-services/#controllers","text":"Where is need to call external REST this code should be write. protected readonly SimpleRouteService _routeClient; And in constructor public PedidosController(AppDBContext context, SimpleRouteService route) : base(context) { _routeClient = route; } Then each time a call is needed a private object is available in controller.","title":"Controllers"},{"location":"linter/","text":"Configuring ESLint on Angular Test on A14 copiar los archivos o el contendido de la carpeta ESLint ng add @angular-eslint/schematics ng g @angular-eslint/schematics:convert-tslint-to-eslint copiar el directorio ESLint al directorio del proyecto Packages devDependencies @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint import-sort import-sort-cli import-sort-parser-typescript import-sort-style-module vscode extensions \u00b4\u00b4\u00b4\u00b4 { \"recommendations\": [ \"amatiasq.sort-imports\", \"DSKWRK.vscode-generate-getter-setter\", \"esbenp.prettier-vscode\", \"johnpapa.vscode-peacock\", \"ms-azuretools.vscode-docker\", \"ms-vscode.vscode-typescript-tslint-plugin\", \"PKief.material-icon-theme\", \"expertly-simple.ng-evergreen\", \"formulahendry.auto-close-tag\", \"HookyQR.beautify\", \"johnpapa.angular-essentials\", \"msjsdiag.debugger-for-edge\" ] } \u00b4\u00b4\u00b4\u00b4 vscode settings \u00b4\u00b4\u00b4\u00b4 { \"debug.openExplorerOnEnd\": true, \"editor.tabSize\": 2, \"editor.rulers\": [120], \"editor.autoIndent\": \"full\", \"editor.cursorBlinking\": \"solid\", \"editor.formatOnType\": false, \"editor.formatOnPaste\": false, \"editor.formatOnSave\": true, \"editor.minimap.enabled\": false, \"editor.codeActionsOnSave\": { \"source.organizeImports\": true, \"source.fixAll.tslint\": true }, \"editor.defaultFormatter\": \"esbenp.prettier-vscode\", \"[html]\": { \"editor.defaultFormatter\": \"esbenp.prettier-vscode\" }, \"[typescript]\": { \"editor.defaultFormatter\": \"esbenp.prettier-vscode\" }, \"explorer.openEditors.visible\": 0, \"files.trimTrailingWhitespace\": true, \"files.autoSave\": \"off\", \"git.confirmSync\": false, \"git.enableSmartCommit\": true, \"typescript.tsdk\": \"node_modules/typescript/lib\", \"workbench.iconTheme\": \"material-icon-theme\", \"auto-close-tag.SublimeText3Mode\": true, \"html.autoClosingTags\": true, \"ng-evergreen.upgradeChannel\": \"Latest\" } \u00b4\u00b4\u00b4\u00b4 Eslint ignore File .eslintignore \u00b4\u00b4\u00b4\u00b4 node_modules dist \u00b4\u00b4\u00b4\u00b4 eslintrc.json","title":"Linter Config"},{"location":"linter/#configuring-eslint-on-angular","text":"Test on A14 copiar los archivos o el contendido de la carpeta ESLint ng add @angular-eslint/schematics ng g @angular-eslint/schematics:convert-tslint-to-eslint copiar el directorio ESLint al directorio del proyecto","title":"Configuring ESLint on Angular"},{"location":"linter/#packages-devdependencies","text":"@angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint import-sort import-sort-cli import-sort-parser-typescript import-sort-style-module","title":"Packages devDependencies"},{"location":"linter/#vscode-extensions","text":"\u00b4\u00b4\u00b4\u00b4 { \"recommendations\": [ \"amatiasq.sort-imports\", \"DSKWRK.vscode-generate-getter-setter\", \"esbenp.prettier-vscode\", \"johnpapa.vscode-peacock\", \"ms-azuretools.vscode-docker\", \"ms-vscode.vscode-typescript-tslint-plugin\", \"PKief.material-icon-theme\", \"expertly-simple.ng-evergreen\", \"formulahendry.auto-close-tag\", \"HookyQR.beautify\", \"johnpapa.angular-essentials\", \"msjsdiag.debugger-for-edge\" ] } \u00b4\u00b4\u00b4\u00b4","title":"vscode extensions"},{"location":"linter/#vscode-settings","text":"\u00b4\u00b4\u00b4\u00b4 { \"debug.openExplorerOnEnd\": true, \"editor.tabSize\": 2, \"editor.rulers\": [120], \"editor.autoIndent\": \"full\", \"editor.cursorBlinking\": \"solid\", \"editor.formatOnType\": false, \"editor.formatOnPaste\": false, \"editor.formatOnSave\": true, \"editor.minimap.enabled\": false, \"editor.codeActionsOnSave\": { \"source.organizeImports\": true, \"source.fixAll.tslint\": true }, \"editor.defaultFormatter\": \"esbenp.prettier-vscode\", \"[html]\": { \"editor.defaultFormatter\": \"esbenp.prettier-vscode\" }, \"[typescript]\": { \"editor.defaultFormatter\": \"esbenp.prettier-vscode\" }, \"explorer.openEditors.visible\": 0, \"files.trimTrailingWhitespace\": true, \"files.autoSave\": \"off\", \"git.confirmSync\": false, \"git.enableSmartCommit\": true, \"typescript.tsdk\": \"node_modules/typescript/lib\", \"workbench.iconTheme\": \"material-icon-theme\", \"auto-close-tag.SublimeText3Mode\": true, \"html.autoClosingTags\": true, \"ng-evergreen.upgradeChannel\": \"Latest\" } \u00b4\u00b4\u00b4\u00b4","title":"vscode settings"},{"location":"linter/#eslint-ignore","text":"File .eslintignore \u00b4\u00b4\u00b4\u00b4 node_modules dist \u00b4\u00b4\u00b4\u00b4","title":"Eslint ignore"},{"location":"linter/#eslintrcjson","text":"","title":"eslintrc.json"},{"location":"logs/","text":"Implementing backend logs in c Framework We use serilog as default framework for our microservices. The package needed are: Serilog.AspNetCore Serilog.Enrichers.Environment Serilog.Exceptions Serilog.Exceptions.EntityFrameworkCore Serilog.Settings.Configuration Serilog.Sinks.Debug SQL Server Logs For use on SQL Server you need to add this package: Serilog.Sinks.MSSqlServer You can create a table for each microservice or define only one table and record all logs. PostgreSQL Logs For use on PostgreSQL you need to add this packages: Serilog.Sinks.PostgreSQL Serilog.Sinks.PostgreSQL.Configuration Configuration We use configuration on appsettings.json for default or in environment if you need to change some parameter in production to catch a bug. We use some aditionals fields to log information for our microservices: Elapsed: API call time consumed StatusCode: API call status code response Version: Compilation version from csproj RequestMethod: API call method RequestPath: API call endpoint Authorization: JWT sended Host: API call URL Protocol: API call protocol Scheme: API call scheme The following fields are used to know state of call and it are disabled for default throw SaveLogBodies=true appsettings param: QueryString: API call query string with key value information RequestBody: API call request body ResponseBody: API call response body Appsettings.json This is an example on how to setup default configuration to log in production. \"Serilog\": { \"MinimumLevel\": { \"Default\": \"Error\", \"Override\": { \"Microsoft\": \"Error\", \"Microsoft.AspNetCore\": \"Error\", \"Serilog.AspNetCore\": \"Error\", \"Microsoft.EntityFrameworkCore\":\"Error\" } } This is only recording errors on all namespaces and setting some overrides nodes that you can change to get more specific information if error happend or you need to test performance. In MinimumLevel Override Each node defines a Namespace and particulary a Log Level to configure. Supouse you need to check time consuming on APIs calls, you can set Serilog.AspNetCore to Information; or maybe you need yo view the query setting Microsoft.EntityFrameworkCore to Information. SQL Configuration This is the default configuration for SQL Server on each microservice project. \"WriteTo\": [ { \"Name\": \"MSSqlServer\", \"Args\": { \"connectionString\": \"Default\", \"tableName\": \"Logs\", \"autoCreateSqlTable\": true, \"logEventFormatter\": \"Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact\", \"removeStandardColumns\": [\"Properties\", \"MessageTemplate\"], \"columnOptionsSection\": { \"removeStandardColumns\": [\"Properties\", \"MessageTemplate\"], \"addStandardColumns\": [\"LogEvent\"], \"logEvent\": { \"excludeAdditionalProperties\": true, \"excludeStandardColumns\": true }, \"customColumns\": [ { \"ColumnName\": \"Elapsed\", \"DataType\": \"float\" }, { \"ColumnName\": \"StatusCode\", \"DataType\": \"int\" }, { \"ColumnName\": \"Version\", \"DataType\": \"varchar\", \"DataLength\": 50 }, { \"ColumnName\": \"RequestMethod\", \"DataType\": \"varchar\", \"DataLength\": 10 }, { \"ColumnName\": \"RequestPath\", \"DataType\": \"varchar\", \"DataLength\": 300 }, { \"ColumnName\": \"Authorization\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Host\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Protocol\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Scheme\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"QueryString\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"RequestBody\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"ResponseBody\", \"DataType\": \"varchar\" } ] } } } ] The key that can be changed here are: connectionString: it points to database configuration attribute define in ConnectionStrings node. tableName: is the table name where all serillog events are saved. The default is Logs but if you need to change it for debug propouse, you could change this name and save records on other table. Enrich our logs There are differents ways to enrich our event with information that help us to know service status. We can log incoming calls throw a middleware or throw a custom EnrichFromRequest method. Middleware allows to control in depth request call and method is call before executing request so response data is not available yet. Incoming API calls We use a custom middleware ApiLogMiddleware class to enrich our API calls. This allows to get context information and add it to serilog event for recording in database in Invoke method. This middleware is set in our startup process and is important the order. app.UseSerilogRequestLogging(); app.UseMiddleware<ApiLogMiddleware>(); First we need to setup UseSerilogRequestLogging and second configure ApiLog middleware. Outcoming API calls Also, if you are calling services you need to define an enrich handler when you define service in startup. This are only for external services, our microservices has is own logs methods. services.AddHttpClient<CoreService>(c => { c.BaseAddress = new Uri(externalserviceURL); }).AddHttpMessageHandler<ServiceHandler>(); // Enrich Log when calling service For each external call ServiceHandler.SendAsync is call to add event information in out logs. Configuration To allow Logs working you need to setup in initialitation flow. Code Depends if you use NET 5 or greater. NET 5 Code for NET 5 configuration on program.cs public static void Main(string[] args) { ConfigureLogging(); CreateHostBuilder(args).Build().Run(); } public static IHostBuilder CreateHostBuilder(string[] args) => Host.CreateDefaultBuilder(args) .ConfigureLogging(logging => { logging.ClearProviders(); logging.AddConsole(); logging.AddDebug(); //Esto hace que se vea en vs code consola de depuraci\u00f3n }) .ConfigureWebHostDefaults(webBuilder => webBuilder.UseStartup<Startup>()) .ConfigureAppConfiguration(configuration => { configuration.AddJsonFile(\"appsettings.json\", optional: false, reloadOnChange: true); configuration.AddEnvironmentVariables(); }) .UseSerilog(); private static void ConfigureLogging() { // Get Application version to Log var productVersion = \"\"; var assembly = Assembly.GetExecutingAssembly(); var assemblyVersion = assembly.GetName().Version; FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(assembly.Location); productVersion = fvi.ProductVersion ?? \"product version not found\"; var environment = Environment.GetEnvironmentVariable(\"ASPNETCORE_ENVIRONMENT\"); var configuration = new ConfigurationBuilder() .AddJsonFile(\"appsettings.json\", optional: false, reloadOnChange: true) .AddEnvironmentVariables() .Build(); Log.Logger = new LoggerConfiguration() .Enrich.FromLogContext() .Enrich.WithExceptionDetails(new DestructuringOptionsBuilder() .WithDefaultDestructurers() .WithDestructurers(new[] { new DbUpdateExceptionDestructurer() }) ) .Enrich.WithMachineName() .WriteTo.Debug() .WriteTo.Console() .Enrich.WithProperty(\"Environment\", environment) .Enrich.WithProperty(\"Version\", productVersion) .ReadFrom.Configuration(configuration) .CreateLogger(); } Code for Startup // This allows to enrich without middleware but it does not have response data // app.UseSerilogRequestLogging(opts => opts.EnrichDiagnosticContext = LogHelper.EnrichFromRequest); app.UseSerilogRequestLogging(); app.UseMiddleware<ApiLogMiddleware>(); app.UseAuthentication(); Change configuration from environment variable If you want to change some configuration set in appsetting.json from environment you could set a variable: \"Serilog\": \"{\\\"MinimumLevel\\\": {\\\"Override\\\": {\\\"Serilog.AspNetCore\\\": \\\"Information\\\"}}\", or other option \"Serilog__MinimumLevel__Override__Serilog.AspNetCore\": \"Information\",","title":"Logs"},{"location":"logs/#implementing-backend-logs-in-c","text":"","title":"Implementing backend logs in c"},{"location":"logs/#framework","text":"We use serilog as default framework for our microservices. The package needed are: Serilog.AspNetCore Serilog.Enrichers.Environment Serilog.Exceptions Serilog.Exceptions.EntityFrameworkCore Serilog.Settings.Configuration Serilog.Sinks.Debug","title":"Framework"},{"location":"logs/#sql-server-logs","text":"For use on SQL Server you need to add this package: Serilog.Sinks.MSSqlServer You can create a table for each microservice or define only one table and record all logs.","title":"SQL Server Logs"},{"location":"logs/#postgresql-logs","text":"For use on PostgreSQL you need to add this packages: Serilog.Sinks.PostgreSQL Serilog.Sinks.PostgreSQL.Configuration","title":"PostgreSQL Logs"},{"location":"logs/#configuration","text":"We use configuration on appsettings.json for default or in environment if you need to change some parameter in production to catch a bug. We use some aditionals fields to log information for our microservices: Elapsed: API call time consumed StatusCode: API call status code response Version: Compilation version from csproj RequestMethod: API call method RequestPath: API call endpoint Authorization: JWT sended Host: API call URL Protocol: API call protocol Scheme: API call scheme The following fields are used to know state of call and it are disabled for default throw SaveLogBodies=true appsettings param: QueryString: API call query string with key value information RequestBody: API call request body ResponseBody: API call response body","title":"Configuration"},{"location":"logs/#appsettingsjson","text":"This is an example on how to setup default configuration to log in production. \"Serilog\": { \"MinimumLevel\": { \"Default\": \"Error\", \"Override\": { \"Microsoft\": \"Error\", \"Microsoft.AspNetCore\": \"Error\", \"Serilog.AspNetCore\": \"Error\", \"Microsoft.EntityFrameworkCore\":\"Error\" } } This is only recording errors on all namespaces and setting some overrides nodes that you can change to get more specific information if error happend or you need to test performance. In MinimumLevel Override Each node defines a Namespace and particulary a Log Level to configure. Supouse you need to check time consuming on APIs calls, you can set Serilog.AspNetCore to Information; or maybe you need yo view the query setting Microsoft.EntityFrameworkCore to Information.","title":"Appsettings.json"},{"location":"logs/#sql-configuration","text":"This is the default configuration for SQL Server on each microservice project. \"WriteTo\": [ { \"Name\": \"MSSqlServer\", \"Args\": { \"connectionString\": \"Default\", \"tableName\": \"Logs\", \"autoCreateSqlTable\": true, \"logEventFormatter\": \"Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact\", \"removeStandardColumns\": [\"Properties\", \"MessageTemplate\"], \"columnOptionsSection\": { \"removeStandardColumns\": [\"Properties\", \"MessageTemplate\"], \"addStandardColumns\": [\"LogEvent\"], \"logEvent\": { \"excludeAdditionalProperties\": true, \"excludeStandardColumns\": true }, \"customColumns\": [ { \"ColumnName\": \"Elapsed\", \"DataType\": \"float\" }, { \"ColumnName\": \"StatusCode\", \"DataType\": \"int\" }, { \"ColumnName\": \"Version\", \"DataType\": \"varchar\", \"DataLength\": 50 }, { \"ColumnName\": \"RequestMethod\", \"DataType\": \"varchar\", \"DataLength\": 10 }, { \"ColumnName\": \"RequestPath\", \"DataType\": \"varchar\", \"DataLength\": 300 }, { \"ColumnName\": \"Authorization\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Host\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Protocol\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"Scheme\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"QueryString\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"RequestBody\", \"DataType\": \"varchar\" }, { \"ColumnName\": \"ResponseBody\", \"DataType\": \"varchar\" } ] } } } ] The key that can be changed here are: connectionString: it points to database configuration attribute define in ConnectionStrings node. tableName: is the table name where all serillog events are saved. The default is Logs but if you need to change it for debug propouse, you could change this name and save records on other table.","title":"SQL Configuration"},{"location":"logs/#enrich-our-logs","text":"There are differents ways to enrich our event with information that help us to know service status. We can log incoming calls throw a middleware or throw a custom EnrichFromRequest method. Middleware allows to control in depth request call and method is call before executing request so response data is not available yet.","title":"Enrich our logs"},{"location":"logs/#incoming-api-calls","text":"We use a custom middleware ApiLogMiddleware class to enrich our API calls. This allows to get context information and add it to serilog event for recording in database in Invoke method. This middleware is set in our startup process and is important the order. app.UseSerilogRequestLogging(); app.UseMiddleware<ApiLogMiddleware>(); First we need to setup UseSerilogRequestLogging and second configure ApiLog middleware.","title":"Incoming API calls"},{"location":"logs/#outcoming-api-calls","text":"Also, if you are calling services you need to define an enrich handler when you define service in startup. This are only for external services, our microservices has is own logs methods. services.AddHttpClient<CoreService>(c => { c.BaseAddress = new Uri(externalserviceURL); }).AddHttpMessageHandler<ServiceHandler>(); // Enrich Log when calling service For each external call ServiceHandler.SendAsync is call to add event information in out logs.","title":"Outcoming API calls"},{"location":"logs/#configuration_1","text":"To allow Logs working you need to setup in initialitation flow. Code Depends if you use NET 5 or greater.","title":"Configuration"},{"location":"logs/#net-5","text":"Code for NET 5 configuration on program.cs public static void Main(string[] args) { ConfigureLogging(); CreateHostBuilder(args).Build().Run(); } public static IHostBuilder CreateHostBuilder(string[] args) => Host.CreateDefaultBuilder(args) .ConfigureLogging(logging => { logging.ClearProviders(); logging.AddConsole(); logging.AddDebug(); //Esto hace que se vea en vs code consola de depuraci\u00f3n }) .ConfigureWebHostDefaults(webBuilder => webBuilder.UseStartup<Startup>()) .ConfigureAppConfiguration(configuration => { configuration.AddJsonFile(\"appsettings.json\", optional: false, reloadOnChange: true); configuration.AddEnvironmentVariables(); }) .UseSerilog(); private static void ConfigureLogging() { // Get Application version to Log var productVersion = \"\"; var assembly = Assembly.GetExecutingAssembly(); var assemblyVersion = assembly.GetName().Version; FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(assembly.Location); productVersion = fvi.ProductVersion ?? \"product version not found\"; var environment = Environment.GetEnvironmentVariable(\"ASPNETCORE_ENVIRONMENT\"); var configuration = new ConfigurationBuilder() .AddJsonFile(\"appsettings.json\", optional: false, reloadOnChange: true) .AddEnvironmentVariables() .Build(); Log.Logger = new LoggerConfiguration() .Enrich.FromLogContext() .Enrich.WithExceptionDetails(new DestructuringOptionsBuilder() .WithDefaultDestructurers() .WithDestructurers(new[] { new DbUpdateExceptionDestructurer() }) ) .Enrich.WithMachineName() .WriteTo.Debug() .WriteTo.Console() .Enrich.WithProperty(\"Environment\", environment) .Enrich.WithProperty(\"Version\", productVersion) .ReadFrom.Configuration(configuration) .CreateLogger(); } Code for Startup // This allows to enrich without middleware but it does not have response data // app.UseSerilogRequestLogging(opts => opts.EnrichDiagnosticContext = LogHelper.EnrichFromRequest); app.UseSerilogRequestLogging(); app.UseMiddleware<ApiLogMiddleware>(); app.UseAuthentication();","title":"NET 5"},{"location":"logs/#change-configuration-from-environment-variable","text":"If you want to change some configuration set in appsetting.json from environment you could set a variable: \"Serilog\": \"{\\\"MinimumLevel\\\": {\\\"Override\\\": {\\\"Serilog.AspNetCore\\\": \\\"Information\\\"}}\", or other option \"Serilog__MinimumLevel__Override__Serilog.AspNetCore\": \"Information\",","title":"Change configuration from environment variable"},{"location":"microfronts/","text":"Add new micro front copy auth.guard ng new MF setup linter ng add @angular-architects/module-federation ng g m MODULENAME ng g c ventas/pedidos/pedidos-search --skip-tests --inline-style --flat Main.ts en Layout \u00b4\u00b4\u00b4\u00b4 import { loadManifest } from '@angular-architects/module-federation'; loadManifest('/assets/mf.manifest.json') .catch((err) => console.error(err)) .then((_) => import('./bootstrap')) .catch((err) => console.error(err)); \u00b4\u00b4\u00b4\u00b4 Exposes data from microfront webpack.config.js \u00b4\u00b4\u00b4\u00b4 const { shareAll, withModuleFederationPlugin } = require('@angular-architects/module-federation/webpack'); module.exports = withModuleFederationPlugin({ name: 'mfe1', exposes: { // Adjusted line: './Module': './projects/mfe1/src/app/flights/flights.module.ts' }, shared: { ...shareAll({ singleton: true, strictVersion: true, requiredVersion: 'auto' }), }, }); \u00b4\u00b4\u00b4\u00b4 Componentes StandAlone Primero hay que definirlos en el proyecto de angular como: \u00b4\u00b4\u00b4\u00b4 @Component({ selector: 'app-pedidos', standalone: true, <---- ESTO ES IMPORTANTE templateUrl: './pedidos.component.html', styleUrls: ['./pedidos.component.scss'] }) \u00b4\u00b4\u00b4\u00b4 Luego no se definen como declarations en app.module.ts se exponene as\u00ed: \u00b4\u00b4\u00b4\u00b4 exposes: { // \"./routes\": \"./src/app/ventas.routes.ts\", './Module': './src/app/ventas/ventas.module.ts', './Component': './src/app/pedidos/pedidos.component.ts', }, \u00b4\u00b4\u00b4\u00b4 En el shell se declaran en el manifest como: \u00b4\u00b4\u00b4\u00b4 \"pedidos\": { \"remoteEntry\": \"http://localhost:4201/remoteEntry.js\", \"exposedModule\": \"./Component\", \"displayName\": \"pedidos\", \"routePath\": \"pedidos\" } \u00b4\u00b4\u00b4\u00b4 Se cargan como ruta as\u00ed \u00b4\u00b4\u00b4\u00b4 { path: 'pedidos', loadComponent: () => loadRemoteModule({ type: 'module', remoteEntry: 'http://localhost:4201/remoteEntry.js', exposedModule: './Component', }).then((m) => m.PedidosComponent), }, \u00b4\u00b4\u00b4\u00b4 Incluir M\u00f3dulos completos Crear el m\u00f3dulo en el proyecto Agregar los routes como childs en la definci\u00f3n del modulo \u00b4\u00b4\u00b4\u00b4 imports: [ CommonModule, RouterModule.forChild(VENTAS_ROUTES) ] \u00b4\u00b4\u00b4\u00b4 Se exponene as\u00ed en el webpack: \u00b4\u00b4\u00b4\u00b4 exposes: { // \"./routes\": \"./src/app/ventas.routes.ts\", './Module': './src/app/ventas/ventas.module.ts', './Component': './src/app/pedidos/pedidos.component.ts', }, En alg\u00fan proyecto con Angular 14 me tiro que no estaba compilado el m\u00f3dulo, que deb\u00eda incluirlo en tsconfig.app.json como se muestra abajo. \u00b4\u00b4\u00b4\u00b4 \"include\": [\"src/ /*.d.ts\", \" /app/ventas/* / .ts\"] \u00b4\u00b4\u00b4\u00b4 en el shell \u00b4\u00b4\u00b4\u00b4 Se levantan as\u00ed en el manifest: \u00b4\u00b4\u00b4\u00b4 \"admin\": { \"remoteEntry\": \"http://localhost:4201/remoteEntry.js\", \"exposedModule\": \"./Module\", \"displayName\": \"ventasApp\", \"routePath\": \"pedidos\", \"ngModuleName\": \"VentasModule\" }, \u00b4\u00b4\u00b4\u00b4 Se importan las rutas: \u00b4\u00b4\u00b4\u00b4 { path: 'ventas', loadChildren: () => loadRemoteModule({ type: 'manifest', remoteName: 'admin', // name in manifest json exposedModule: './Module', }).then((m) => m.VentasModule), }, \u00b4\u00b4\u00b4\u00b4 Componentes para migrar funcionalidad de Neox Bootstrap (npm i bootstrap) -> Compartido en webpack ngx-toastr (npm i ngx-toastr) -> Compartido en webpack jquery (npm i jquery) -> Compartido en webpack ngx-bootstrap (npm i ngx-bootstrap) -> Compartido en webpack fontawesome icons (npm i @fortawesome/angular-fontawesome, npm i @fortawesome/free-solid-svg-icons) pagination (mpm i ngx-pagination) Popper dropdowns (npm i @popperjs/core) Tabs (npm i) Migrando Crear los componentes en el proyecto Copiar y pegar el HTML Copiar y pegar el TS Pasar los servicios","title":"Microfronts"},{"location":"microfronts/#add-new-micro-front","text":"copy auth.guard ng new MF setup linter ng add @angular-architects/module-federation ng g m MODULENAME ng g c ventas/pedidos/pedidos-search --skip-tests --inline-style --flat","title":"Add new micro front"},{"location":"microfronts/#maints-en-layout","text":"\u00b4\u00b4\u00b4\u00b4 import { loadManifest } from '@angular-architects/module-federation'; loadManifest('/assets/mf.manifest.json') .catch((err) => console.error(err)) .then((_) => import('./bootstrap')) .catch((err) => console.error(err)); \u00b4\u00b4\u00b4\u00b4","title":"Main.ts en Layout"},{"location":"microfronts/#exposes-data-from-microfront-webpackconfigjs","text":"\u00b4\u00b4\u00b4\u00b4 const { shareAll, withModuleFederationPlugin } = require('@angular-architects/module-federation/webpack'); module.exports = withModuleFederationPlugin({ name: 'mfe1', exposes: { // Adjusted line: './Module': './projects/mfe1/src/app/flights/flights.module.ts' }, shared: { ...shareAll({ singleton: true, strictVersion: true, requiredVersion: 'auto' }), }, }); \u00b4\u00b4\u00b4\u00b4","title":"Exposes data from microfront webpack.config.js"},{"location":"microfronts/#componentes-standalone","text":"Primero hay que definirlos en el proyecto de angular como: \u00b4\u00b4\u00b4\u00b4 @Component({ selector: 'app-pedidos', standalone: true, <---- ESTO ES IMPORTANTE templateUrl: './pedidos.component.html', styleUrls: ['./pedidos.component.scss'] }) \u00b4\u00b4\u00b4\u00b4 Luego no se definen como declarations en app.module.ts se exponene as\u00ed: \u00b4\u00b4\u00b4\u00b4 exposes: { // \"./routes\": \"./src/app/ventas.routes.ts\", './Module': './src/app/ventas/ventas.module.ts', './Component': './src/app/pedidos/pedidos.component.ts', }, \u00b4\u00b4\u00b4\u00b4 En el shell se declaran en el manifest como: \u00b4\u00b4\u00b4\u00b4 \"pedidos\": { \"remoteEntry\": \"http://localhost:4201/remoteEntry.js\", \"exposedModule\": \"./Component\", \"displayName\": \"pedidos\", \"routePath\": \"pedidos\" } \u00b4\u00b4\u00b4\u00b4 Se cargan como ruta as\u00ed \u00b4\u00b4\u00b4\u00b4 { path: 'pedidos', loadComponent: () => loadRemoteModule({ type: 'module', remoteEntry: 'http://localhost:4201/remoteEntry.js', exposedModule: './Component', }).then((m) => m.PedidosComponent), }, \u00b4\u00b4\u00b4\u00b4","title":"Componentes StandAlone"},{"location":"microfronts/#incluir-modulos-completos","text":"Crear el m\u00f3dulo en el proyecto Agregar los routes como childs en la definci\u00f3n del modulo \u00b4\u00b4\u00b4\u00b4 imports: [ CommonModule, RouterModule.forChild(VENTAS_ROUTES) ] \u00b4\u00b4\u00b4\u00b4 Se exponene as\u00ed en el webpack: \u00b4\u00b4\u00b4\u00b4 exposes: { // \"./routes\": \"./src/app/ventas.routes.ts\", './Module': './src/app/ventas/ventas.module.ts', './Component': './src/app/pedidos/pedidos.component.ts', }, En alg\u00fan proyecto con Angular 14 me tiro que no estaba compilado el m\u00f3dulo, que deb\u00eda incluirlo en tsconfig.app.json como se muestra abajo. \u00b4\u00b4\u00b4\u00b4 \"include\": [\"src/ /*.d.ts\", \" /app/ventas/* / .ts\"] \u00b4\u00b4\u00b4\u00b4","title":"Incluir M\u00f3dulos completos"},{"location":"microfronts/#en-el-shell","text":"\u00b4\u00b4\u00b4\u00b4 Se levantan as\u00ed en el manifest: \u00b4\u00b4\u00b4\u00b4 \"admin\": { \"remoteEntry\": \"http://localhost:4201/remoteEntry.js\", \"exposedModule\": \"./Module\", \"displayName\": \"ventasApp\", \"routePath\": \"pedidos\", \"ngModuleName\": \"VentasModule\" }, \u00b4\u00b4\u00b4\u00b4 Se importan las rutas: \u00b4\u00b4\u00b4\u00b4 { path: 'ventas', loadChildren: () => loadRemoteModule({ type: 'manifest', remoteName: 'admin', // name in manifest json exposedModule: './Module', }).then((m) => m.VentasModule), }, \u00b4\u00b4\u00b4\u00b4","title":"en el shell"},{"location":"microfronts/#componentes-para-migrar-funcionalidad-de-neox","text":"Bootstrap (npm i bootstrap) -> Compartido en webpack ngx-toastr (npm i ngx-toastr) -> Compartido en webpack jquery (npm i jquery) -> Compartido en webpack ngx-bootstrap (npm i ngx-bootstrap) -> Compartido en webpack fontawesome icons (npm i @fortawesome/angular-fontawesome, npm i @fortawesome/free-solid-svg-icons) pagination (mpm i ngx-pagination) Popper dropdowns (npm i @popperjs/core) Tabs (npm i)","title":"Componentes para migrar funcionalidad de Neox"},{"location":"microfronts/#migrando","text":"Crear los componentes en el proyecto Copiar y pegar el HTML Copiar y pegar el TS Pasar los servicios","title":"Migrando"},{"location":"schema-compare/","text":"Schema compare Las opciones se pueden guardar en un archivo scmp para poder recuperarlas luega y hacer siempre las mismas comparaciones. Queda resolver la opci\u00f3n que tiene dbArt Settings Set Ignore With NoCheck uncheck Script New Contraint Validation Uncheck all Drop XXXX Not In Source Check Ignore Column Order","title":"Schema Compare"},{"location":"schema-compare/#schema-compare","text":"Las opciones se pueden guardar en un archivo scmp para poder recuperarlas luega y hacer siempre las mismas comparaciones. Queda resolver la opci\u00f3n que tiene dbArt","title":"Schema compare"},{"location":"schema-compare/#settings","text":"Set Ignore With NoCheck uncheck Script New Contraint Validation Uncheck all Drop XXXX Not In Source Check Ignore Column Order","title":"Settings"},{"location":"semantic-release/","text":"Grape use of Semantic Release All developers should use this specifications. Project specifications C# backend projects In .csproj this code should be defined in <VersionPrefix>1.0.0</VersionPrefix> <VersionSuffix>$([System.DateTime]::UtcNow.ToString(`yyyyMMdd-HHmm`))</VersionSuffix> ``` Manually versioning Angular In environments add version: '1.0.0', Add in .ts file: version: string = '1.0'; year = 0; custom = { version: true, }; constructor() {} ngOnInit(): void { this.version = environment.version; this.year = new Date().getFullYear(); } Add in html file: <p class=\"mb-1\">\u00a9 {{ year }} AppName v.{{ version }}</p>","title":"Releasing"},{"location":"semantic-release/#grape-use-of-semantic-release","text":"All developers should use this specifications.","title":"Grape use of Semantic Release"},{"location":"semantic-release/#project-specifications","text":"","title":"Project specifications"},{"location":"semantic-release/#c-backend-projects","text":"In .csproj this code should be defined in <VersionPrefix>1.0.0</VersionPrefix> <VersionSuffix>$([System.DateTime]::UtcNow.ToString(`yyyyMMdd-HHmm`))</VersionSuffix> ```","title":"C# backend projects"},{"location":"semantic-release/#manually-versioning-angular","text":"In environments add version: '1.0.0', Add in .ts file: version: string = '1.0'; year = 0; custom = { version: true, }; constructor() {} ngOnInit(): void { this.version = environment.version; this.year = new Date().getFullYear(); } Add in html file: <p class=\"mb-1\">\u00a9 {{ year }} AppName v.{{ version }}</p>","title":"Manually versioning Angular"},{"location":"working/","text":"Working on Grape Projects On boarding to dev team Before a dev can work with Grape Projects should be enable in our Tools. For that reason we need to send and email to admin@grape.com.ar with the following information: Mail to add in Dev Ops Github Account to add in repos Sign NDA Defines role in Dev Team (Frontend, Mobile, Backend, UX Designer or Full stack) Tools we use We use Azure DevOps Boards for daily task, user stories or features, It's help us to define priorities on all differents projects. Our source code is in Github private repos. We have differents Organizations for main projects or customers and inside each Organization we work on his specific repos. We code mainly with vs code and azure data studio. Also, in some cases we use visual studio for older project in asp.net or wpf for windows. Task Assignation We usually meet daily in the morning to assign task and define priorities for a day or two. Task are assingned in DevOps with estimated hours, if for some reason task is taking more than estimation time developer should notify user story responsable and wait for an answer working in another task. When description of task is confuse or incomplete dev could start a work item discussion with user story responsable or other team member to clarify. Once a dev has correct specification and task understanding must activate task so others team members knows this task is taken. To start working in code dev should start a branch asociated with is user, work item id and some short description. ie: fruizar/144-improve-import. Mainly base branch colud be dev but in some cases when a fix is needed on production environment main o master branch should be use as base, in that case PR should be done to main and dev. Submitting and Closing Tasks After task is done following Coding standarizations and good practices dev should close task indicating Completed time hours in work item. If some consideration about task execution is needed dev should write it in work item discussion. Dev also need to make a pull request in Github indication who must Review the code, usually is user story responsable or team leader. In PR description Work item URL should be write and other considerations dev wants to tell reviewer. Code standarization Grape has snippets for most common user stories on differents languages, dev should install it from https://github.com/grape-software/docs/tree/main/snippets and use it when starting a standar task. Dev could improve this snippets modyfing or adding new ones, all should start with gr-en-DESCRIPTION, making a Pull Request in docs repository. Standard Angular UI Search Module Is used like a menu where user can work with some part of business making most common operations: Search with filters or advances filters Add, edit or remove Export or Import Defines record by page Order results Access to related lists View resume information en footer Make some business specific actions Add or edit operations could be on Popup, when little inputs needs to be fill, or with navigation in other case. Remove operations are confirmed in Popup in same search screen. Asociated Lists User access some part of business throw search module and then needs to work with related records ie. Headers and Details objects. This UI try to solve operations related with asociated list of object business. User could: View Header with Parent Record Resume Information and back icon See paged list Defines record by page Order results Add, edit or remove Make some business specific actions Add, edit and remove operations are in Popup in this UI unless specified differently in the task. CU Components Create or Update Components are Form Angular components that allows to add or edit a database record in some cases with a complex transaction that writes in multiple entities. Must have client simple domain logic validation for each input. ie. max, number, dates, select validations. Raising user friendly backend messages. Stepper UI Stepper allows complex transactions to be made in simple steps for the user and send a whole transactions POST to backend. Step component could be in own stepper or a reusing existing component. Automplete Each time a user needs to select a record with a big number of records or with multi attributes to look for should be implemented as a autocomplete component for reuse. This component has only input in html and binding a calculate field calls fullName implemented in Class to search for as Not Mapped. Standard Backend CRUD operations SEARCH Allows to make searchs for Search UI with common filters implemented in searchText, custom based specific attribute for custom SearchX class inherited from SearchModel. Set number of records for page and order by any object attribute. Implements onlyActive attribute to get active records in each business model. Returns a dynamic object with totalCount with all records, res array with a list of business object to search for and a search object with all attributes passed to search API. API is /{controller} C# Snippet gr-en-search GET Allows to make a get for an specific business object with all his first level related entities and in some cases including more than first level. Returns all attributes of business object with included entities. API is /{controller}/{id} C# Snippet gr-en-get-id POST Allows to make a call to insert a record o a record with related in one transaction to the database. All business validation to get consistency should be done in this method. C# Snippet gr-en-post PUT Allows to make a call to insert a record o a record with related in one transaction to the database. All business validation to get consistency should be done in this method. Working with Audits component changes should be done with db.Entry(oldObject).CurrentValues.SetValues(record); C# Snippet gr-en-put DELETE Deletes remove entity from database, some business use cases should implement logical deleted with an database update instead phisically delete record. In some cases it must record to trash table whole object in json format. C# Sinppet gr-en-delete AUTOCOMPLETE Search in database for automplete typeahead input objects and should returns fullName (calculated not mapped field) and business primary key. C# Snippet gr-en-autocomplete Coding good practices API Comments Should explain what API does and what validation it have. Swagger All public method should be marked as [ApiExplorerSettings(IgnoreApi = true)] to work with swagger. Before push code backend /docs must be checked in order to validate OpenAPI docs is working. Vs Code Configuration C Format on Save Lint? Extensions: Omnisharp C# C# xml Documentation Comments (Keisuke Kato) RestClient (Huachao Mao) Angular Format on Save Extensions: Angular Essentials (Jhon Papa) Angular Lanfuage Service Prettier ESLint sort-imports (VSC Sort Import) Commit Message Format https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-format This specification is inspired by and supersedes the [AngularJS commit message format][commit-message-format]. We have very precise rules over how our Git commit messages must be formatted. This format leads to easier to read commit history . Each commit message consists of a header , a body , and a footer . <header> <BLANK LINE> <body> <BLANK LINE> <footer> The header is mandatory and must conform to the Commit Message Header format. The body is mandatory for all commits except for those of type \"docs\". When the body is present it must be at least 20 characters long and must conform to the Commit Message Body format. The footer is optional. The Commit Message Footer format describes what the footer is used for and the structure it must have. Commit Message Header <type>(<scope>): <short summary> \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2af8 Summary in present tense. Not capitalized. No period at the end. \u2502 \u2502 \u2502 \u2514\u2500\u2af8 Commit Scope: animations|bazel|benchpress|common|compiler|compiler-cli|core| \u2502 elements|forms|http|language-service|localize|platform-browser| \u2502 platform-browser-dynamic|platform-server|router|service-worker| \u2502 upgrade|zone.js|packaging|changelog|docs-infra|migrations|ngcc|ve| \u2502 devtools \u2502 \u2514\u2500\u2af8 Commit Type: build|ci|docs|feat|fix|perf|refactor|test The <type> and <summary> fields are mandatory, the (<scope>) field is optional. Type Must be one of the following: build : Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm) ci : Changes to our CI configuration files and scripts (examples: CircleCi, SauceLabs) docs : Documentation only changes feat : A new feature fix : A bug fix perf : A code change that improves performance refactor : A code change that neither fixes a bug nor adds a feature test : Adding missing tests or correcting existing tests","title":"Working"},{"location":"working/#working-on-grape-projects","text":"","title":"Working on Grape Projects"},{"location":"working/#on-boarding-to-dev-team","text":"Before a dev can work with Grape Projects should be enable in our Tools. For that reason we need to send and email to admin@grape.com.ar with the following information: Mail to add in Dev Ops Github Account to add in repos Sign NDA Defines role in Dev Team (Frontend, Mobile, Backend, UX Designer or Full stack)","title":"On boarding to dev team"},{"location":"working/#tools-we-use","text":"We use Azure DevOps Boards for daily task, user stories or features, It's help us to define priorities on all differents projects. Our source code is in Github private repos. We have differents Organizations for main projects or customers and inside each Organization we work on his specific repos. We code mainly with vs code and azure data studio. Also, in some cases we use visual studio for older project in asp.net or wpf for windows.","title":"Tools we use"},{"location":"working/#task-assignation","text":"We usually meet daily in the morning to assign task and define priorities for a day or two. Task are assingned in DevOps with estimated hours, if for some reason task is taking more than estimation time developer should notify user story responsable and wait for an answer working in another task. When description of task is confuse or incomplete dev could start a work item discussion with user story responsable or other team member to clarify. Once a dev has correct specification and task understanding must activate task so others team members knows this task is taken. To start working in code dev should start a branch asociated with is user, work item id and some short description. ie: fruizar/144-improve-import. Mainly base branch colud be dev but in some cases when a fix is needed on production environment main o master branch should be use as base, in that case PR should be done to main and dev.","title":"Task Assignation"},{"location":"working/#submitting-and-closing-tasks","text":"After task is done following Coding standarizations and good practices dev should close task indicating Completed time hours in work item. If some consideration about task execution is needed dev should write it in work item discussion. Dev also need to make a pull request in Github indication who must Review the code, usually is user story responsable or team leader. In PR description Work item URL should be write and other considerations dev wants to tell reviewer.","title":"Submitting and Closing Tasks"},{"location":"working/#code-standarization","text":"Grape has snippets for most common user stories on differents languages, dev should install it from https://github.com/grape-software/docs/tree/main/snippets and use it when starting a standar task. Dev could improve this snippets modyfing or adding new ones, all should start with gr-en-DESCRIPTION, making a Pull Request in docs repository.","title":"Code standarization"},{"location":"working/#standard-angular-ui","text":"","title":"Standard Angular UI"},{"location":"working/#search-module","text":"Is used like a menu where user can work with some part of business making most common operations: Search with filters or advances filters Add, edit or remove Export or Import Defines record by page Order results Access to related lists View resume information en footer Make some business specific actions Add or edit operations could be on Popup, when little inputs needs to be fill, or with navigation in other case. Remove operations are confirmed in Popup in same search screen.","title":"Search Module"},{"location":"working/#asociated-lists","text":"User access some part of business throw search module and then needs to work with related records ie. Headers and Details objects. This UI try to solve operations related with asociated list of object business. User could: View Header with Parent Record Resume Information and back icon See paged list Defines record by page Order results Add, edit or remove Make some business specific actions Add, edit and remove operations are in Popup in this UI unless specified differently in the task.","title":"Asociated Lists"},{"location":"working/#cu-components","text":"Create or Update Components are Form Angular components that allows to add or edit a database record in some cases with a complex transaction that writes in multiple entities. Must have client simple domain logic validation for each input. ie. max, number, dates, select validations. Raising user friendly backend messages.","title":"CU Components"},{"location":"working/#stepper-ui","text":"Stepper allows complex transactions to be made in simple steps for the user and send a whole transactions POST to backend. Step component could be in own stepper or a reusing existing component.","title":"Stepper UI"},{"location":"working/#automplete","text":"Each time a user needs to select a record with a big number of records or with multi attributes to look for should be implemented as a autocomplete component for reuse. This component has only input in html and binding a calculate field calls fullName implemented in Class to search for as Not Mapped.","title":"Automplete"},{"location":"working/#standard-backend-crud-operations","text":"","title":"Standard Backend CRUD operations"},{"location":"working/#search","text":"Allows to make searchs for Search UI with common filters implemented in searchText, custom based specific attribute for custom SearchX class inherited from SearchModel. Set number of records for page and order by any object attribute. Implements onlyActive attribute to get active records in each business model. Returns a dynamic object with totalCount with all records, res array with a list of business object to search for and a search object with all attributes passed to search API. API is /{controller} C# Snippet gr-en-search","title":"SEARCH"},{"location":"working/#get","text":"Allows to make a get for an specific business object with all his first level related entities and in some cases including more than first level. Returns all attributes of business object with included entities. API is /{controller}/{id} C# Snippet gr-en-get-id","title":"GET"},{"location":"working/#post","text":"Allows to make a call to insert a record o a record with related in one transaction to the database. All business validation to get consistency should be done in this method. C# Snippet gr-en-post","title":"POST"},{"location":"working/#put","text":"Allows to make a call to insert a record o a record with related in one transaction to the database. All business validation to get consistency should be done in this method. Working with Audits component changes should be done with db.Entry(oldObject).CurrentValues.SetValues(record); C# Snippet gr-en-put","title":"PUT"},{"location":"working/#delete","text":"Deletes remove entity from database, some business use cases should implement logical deleted with an database update instead phisically delete record. In some cases it must record to trash table whole object in json format. C# Sinppet gr-en-delete","title":"DELETE"},{"location":"working/#autocomplete","text":"Search in database for automplete typeahead input objects and should returns fullName (calculated not mapped field) and business primary key. C# Snippet gr-en-autocomplete","title":"AUTOCOMPLETE"},{"location":"working/#coding-good-practices","text":"","title":"Coding good practices"},{"location":"working/#api-comments","text":"Should explain what API does and what validation it have.","title":"API Comments"},{"location":"working/#swagger","text":"All public method should be marked as [ApiExplorerSettings(IgnoreApi = true)] to work with swagger. Before push code backend /docs must be checked in order to validate OpenAPI docs is working.","title":"Swagger"},{"location":"working/#vs-code-configuration","text":"","title":"Vs Code Configuration"},{"location":"working/#c","text":"Format on Save Lint? Extensions: Omnisharp C# C# xml Documentation Comments (Keisuke Kato) RestClient (Huachao Mao)","title":"C"},{"location":"working/#angular","text":"Format on Save Extensions: Angular Essentials (Jhon Papa) Angular Lanfuage Service Prettier ESLint sort-imports (VSC Sort Import)","title":"Angular"},{"location":"working/#commit-message-format","text":"https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-format This specification is inspired by and supersedes the [AngularJS commit message format][commit-message-format]. We have very precise rules over how our Git commit messages must be formatted. This format leads to easier to read commit history . Each commit message consists of a header , a body , and a footer . <header> <BLANK LINE> <body> <BLANK LINE> <footer> The header is mandatory and must conform to the Commit Message Header format. The body is mandatory for all commits except for those of type \"docs\". When the body is present it must be at least 20 characters long and must conform to the Commit Message Body format. The footer is optional. The Commit Message Footer format describes what the footer is used for and the structure it must have.","title":" Commit Message Format"},{"location":"working/#commit-message-header","text":"<type>(<scope>): <short summary> \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2af8 Summary in present tense. Not capitalized. No period at the end. \u2502 \u2502 \u2502 \u2514\u2500\u2af8 Commit Scope: animations|bazel|benchpress|common|compiler|compiler-cli|core| \u2502 elements|forms|http|language-service|localize|platform-browser| \u2502 platform-browser-dynamic|platform-server|router|service-worker| \u2502 upgrade|zone.js|packaging|changelog|docs-infra|migrations|ngcc|ve| \u2502 devtools \u2502 \u2514\u2500\u2af8 Commit Type: build|ci|docs|feat|fix|perf|refactor|test The <type> and <summary> fields are mandatory, the (<scope>) field is optional.","title":"Commit Message Header"},{"location":"working/#type","text":"Must be one of the following: build : Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm) ci : Changes to our CI configuration files and scripts (examples: CircleCi, SauceLabs) docs : Documentation only changes feat : A new feature fix : A bug fix perf : A code change that improves performance refactor : A code change that neither fixes a bug nor adds a feature test : Adding missing tests or correcting existing tests","title":"Type"}]}